language: node_js
node_js:
- 5.7.0
sudo: required
services:
- docker
script:
- docker-compose -f docker-compose-test.yml build
- docker-compose -f docker-compose-test.yml run test
deploy:
  provider: heroku
  app: gfw-ogr-api-staging
  api_key:
    secure: AFTqPlDp3lWDX7rm3nK5scyCAZBmCC03YUDFGyLEyf4cXdelequ28X/Encss3XAOiIx0FyTxgo7UWIiYMVY9PFrKPy6iSognBbEvQ+LSMfFZuYCGcN+0I6b5gbBCFZaLQFgCLQ0IWr00M8PhQdtvdbEpusUOuFSzzPkXduTYDwhHoSIyi4tQlamVMDxwKTXdDLFACMMfRa7vcTPLobX+snOmqYl+sZiwUotyZpChVvfij231wb26wH5PcbNmU9uLtBnmxknbEEkcsGGLuIG1h7jrUL03dyUZq6uHRMTN7C6l3kb2YpXlm8i+x2jVmOyu+U+jn6rvoDXpHJBOUnt4dVz4mh/zrRNxF5OOH71Mzzd597zjqcee0aq3xBH/eDr/UG7t6nxsu56TQfvszjLIRjq1agW/TZ86k+XIb+DYnCP35DCwEoWgzpDHxyUYhde5sixa3XKBvFOCXz1UPUG1kfduVDYsPc8+Cylv39SZmizyba12oLBUj1cf3fUrPNavM4VW4bKeQPzmzYFN43LZTPz4rKpHULomiiDFJ1bhGK7zzGQK2SL+lbbGBp9I44HqvD7/15tUTc8sLV4qod1aaIvuwmtOZC2sOhzK+FSRje02ocdBLvZf2yayGptz70d020vAtL2ir30Aqmmq00GUTd+w6uNYQs2R8GQZvpovC8k=
env:
  global:
  - secure: dXl7FiGj2uUpii0BdkcCP30TVxT1HfLVWQCx7LqZrcR/zzcIfmgm1dpdUwSpiHwTa2e9k2pOo6Lo3DnX19lmO7wvHofiSxDq+oNqt/hVMQWbE8S0eZHH7BVqDkGqDFZ5XUmER8L3bXI4JrahMMCpUoN1Rk8m1StltAW3Vrc/mMYsiMYb/8f6GPQWLblTcsdY+UX6IgUZDiRA/UnFHClmw5f61i89bsFQ2Bbhd/g1gvz8DDKQHhep381JqCEdgJcn+xhzshZ8x4iydRopIaDHctFwFB19L7I8Hb5kduXYZcKOzp407Qc09DikHXMkJLjG3MG5/ivgMz7v0cTBJRoOOu/BE5PX0srT/e2VuUR6HLoCng821kukezlrzwXGwYx0oivzGQ/KwK5CEZpMpxKel+UDGdQI1pA/EEcCeJ+tSaMW0fjslxj3LaU8tiXns1QQZsQkhuF339dn/A4Dxu3llrHr5zHsX2Yje3XyeEIJpkV8/gLrNP5Lt3giYsQJfHFmsqPWVSF7q/30Potp8AI9QcjJPiKykL3sdX/Kg+jepDMERKhDDCTeJiZmHFYEscpN6G+C+SiGl8hPNIbblCPka/XLbC8wvKWep3gJja9VrBz11EccHGVY1xusBkfQ8XCzj8LigN8a7TYIn/MeMTHz/mcmQDxCVA8n/+FGCIRaR/Y=
  - secure: EMoRfqmOoh6DIYHdDTbxxlntUBFjbniph9DZ97SBPbBVzN/zdzEFS4WCYuQGjL8J5pfTqmpcvqSxUdYL2M9krqXx3rERnxSOF3FNHee0j2AR5PW2GulH7Ybw2By8zWQlfGm43Z9cWXdV2//YCe+QDd4EFe7wbm8JSZM/1xY1CTw5r9ZWX0AqOlyC0CdgzulG2dhmUU95ht6rFk5/RhM9XL+7Ev2wtLCLkocOy9+piVHMBrjzvm89aqomYVx480cy2uHnnLJoVPhXwmvVFyH0BuXa24sPOtOSwZQ5Gooe4F7dMkDrgUQxwpt3C2QhP0p8WvJv9CykEDGc5N+yCsRdS7t7pJUL0nZvXqP6NO2QaHaKfqGYc4V2QxAoRNjcdiw3gXtn+XXy82cEVk5imwme7Jecu18xqtVM04cuivdqqPqyiXc13Xfq381uDkdjndYTDNUsMDykUgnsy4BTdg+STDShj5kkpFvFX6ZKBMDBH16EHcnIg8PaW8UJIVmRlMvAlT/78t+F0s0ZYv+h5Pxu1XZyh8hXVnFtaATL0w5s4HUzJHqUYU0gzVaLuuaFGGeprVzhNkc9RAQT3n0sbVszlE1mHyeJy8daT/qrskSAzR3pi6Rfh5kHCsT0Dn2X3JDONDjonbKsvKMJyQQ3gd5ySNYcFIdd8/a0tQxDyOMKpKg=
  - secure: PFG9OBWpj+H2ROzCBV3i58nkmLeRT/tr5xzcsqMDGtV3D6XFJ13xD+EK/IUUSkwcrwh2zp3ZAfMtjnzWKOU0olvtDRnxgZaSqNNEL3cCePy/+f7bY/S4hJINy0+OJdOwLh1o8HmTWcIYSlLiEodmUnQ+A639Zv57W1MpaI1Qmr6AxmLk30VWRT5i0B/A31sJcyxL9nrKmTOWAexlfMlyxLITY8xERKSJFCcHQFffhpr47zbZwMVL49BOSGzpnak/1kQD3G+JXdoMOmcqpIlNA8RVFVz7kOyVWYmcxHQbgyfhmULCvXAESKYtWPOaFio8MUM2DK/r7kNBgskfUrRyA5PKTiXikt5o0pxRpRRmoo7uqLbODwqhRUo2qQ9rBd6boXY44hQEP05tO62MBFMqztbf6X3bS6nl9gZhBpeOCpjYWuoYzRtWXGxkvYBrR3bc31bJICGsAhjDMFJ11l6LXNyk/10or3/ZMRRHKSA3sFCWyLDPPKR0N1jjHqYFQeX7ufvOUHEJiLCbw54S/HOEbRFuUacFfYJQTqzBFSTZDkYeFQeFscIVLxjNkV0BHtq3x/lcmS1qxQwvCTz9ljDbO9UMqPEfxArRWDewzeTzCWr4SfRO1mEL7lm76OklIsb+g/pKSv0sXkMk4tMQakAIvczBaRnPNSevZXMbWUZ2vf0=
  - secure: 26n/BqBnG6q7BWcdFbtBgNxx8hWCbqwxqDkzBYCiX/wQ6I7LplEk5A9lXJjK3H0dL6YT3Dj9zZuEqQwq2gtgXH+jadYN/vzey1G6L9K5IoKo7Acxkl921dFy2pHJTiYH6FM8WdKw3tC8fhVOOJbrfE89oXCjRVqp22x+ZRiALG4t7RPWJnKfP5ZQ5bCQZyFENy1Li/DSdoI+SDNH6zbDu+QFMpf9HnkAn+hU4JHtEkKlNrWVyYSHcNMcNzS+JC0LjKcMXjDgwwJYyu9rf6Tg/c6zrtWZVIZl6n0wzp/y+ogKIrU+OVcAaXQQ6En4fJ4rgnaRssDrGUUz5cvMsShXjr6pnJTvrXDdommXJJDXQIp8mkWXTX/dntD3gRxNYLyKB5Wew60gPcqhVaGmMEpZQjjrR/A1XOi4dRKrh5lX7Hz+FzrRfWxLiWTEBjhZ5i5ya1BzFk8djxZUgC6e2Elq2crjvl0I5n7o1OJUFzpVtmbbli0mLvUDTXxclLZZS+40tDDcKV18lMyzxIQwUkYvodsp11udFYZLE6mE2U8/xkmdLJNRkKysuHiv/s5JqX9cIyOdUSb3YcF1CdyENfItzuYJbIvPXHXQ87jVl0tz9w5YOfiSN1m8slflaRIMiq2oq3QBya674y785Lkz58lR0Y5rdV9MDB+GCOk+sv2BfuQ=
before_install:
- openssl aes-256-cbc -K $encrypted_da3b25071652_key -iv $encrypted_da3b25071652_iv
  -in deploy-key.enc -out deploy-key -d
